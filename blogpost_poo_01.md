![Cover image for Shin Programming Tensei](https://res.cloudinary.com/practicaldev/image/fetch/s--ZTxAsj32--/c_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000/https://thepracticaldev.s3.amazonaws.com/i/ru1vrpehuz4pq5bo2qd1.jpeg)
# Shin Programming Tensei

POO e como a Abstração pode te tornar mais criativo

A Orientação a Objetos tem quatro conhecidos pilares:

_Abstração_  
  
_Herança_  
  
_Polimorfismo_  
  
_Encapsulamento_

O que eu acho mais divertido é com certeza a Abstração. Desde criança eu era bom em desenhar, escrever, inventar histórias e etc. Então eu me considero um sujeito criativo.

Pensar que em programação você pode simplesmente usar a imaginação para representar coisas do mundo real é para mim a coisa que mais me agrada e que faz do paradigma POO aquilo que vai levar não apenas eu, mas vários outros programadores ao próximo nível em seus estudos, projetos e trabalho.

Existe um livro chamado “Megami Tensei: A Digital Devil Story”

[![**_Digital Devil Story: Megami Tensei 1986_**](https://res.cloudinary.com/practicaldev/image/fetch/s--3pHOYrdO--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.pinimg.com/originals/7c/a6/0c/7ca60c52609ca9a2c1d74266e4d0baae.jpg)](https://res.cloudinary.com/practicaldev/image/fetch/s--3pHOYrdO--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.pinimg.com/originals/7c/a6/0c/7ca60c52609ca9a2c1d74266e4d0baae.jpg)

A história fala sobre um estudante arrogante chamado Akemi Nakajima que é apaixonado por programação e ocultismo.  
  
Uma nova aluna chamada Kyoko chega em sua classe e logo se apaixona por Nakajima, que só quer saber de programar e a rejeita. Kyoko que se sente humilhada combina com delinquentes conhecidos da escola para dar uma surra em Nakajima que após apanhar na frente de toda a classe decide se vingar. Ele então cria uma mistura de ritual ocultista com um programa que ele mesmo escreveu para trazer a sua realidade um demônio chamado Loki, que logo após matar os delinquentes e Kyoko exige a Nakajima mais sacrifícios.

Essa história deu início de uma saga de jogos chamada “Shin Megami Tensei” que é um jogo de RPG onde a mecânica lembra muito a de Pokémon (inclusive alguns fãs da série o apelidaram carinhosamente de Pokémon do capiroto hahah) onde você pode não apenas batalhar contra os inimigos como também coletá-los.  
  
Não se engane, apesar da franquia de jogos da Nintendo criada em 1996 ser muito mais famosa, essa mecânica foi criada por Shin Megami Tensei muito antes em 1987.

[![**SMT Nocturne de 2003 lançado para o Playstation 2**](https://res.cloudinary.com/practicaldev/image/fetch/s--qSA1e2B5--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.pinimg.com/originals/30/af/b2/30afb20e16cad37c01ed0c6a3cda25b2.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--qSA1e2B5--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.pinimg.com/originals/30/af/b2/30afb20e16cad37c01ed0c6a3cda25b2.png)

Talvez você conheça os Spin-offs da Saga que ultimamente anda bem mais famosa entre jogadores mais casuais, como Persona.

[![**Persona 5 de 2016 lançado no PS3 e PS4 simultaneamente**](https://res.cloudinary.com/practicaldev/image/fetch/s--_LJVYyCP--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn.vox-cdn.com/thumbor/rfZ3phIVmrsVbizPz4YHAkw1b7o%3D/0x0:1920x1080/1200x800/filters:focal%2528807x387:1113x693%2529/cdn.vox-cdn.com/uploads/chorus_image/image/64058396/Madarame_Palace_Screenshot_2017_04_09_18_09_33.0.0.1492618961.0.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--_LJVYyCP--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn.vox-cdn.com/thumbor/rfZ3phIVmrsVbizPz4YHAkw1b7o%3D/0x0:1920x1080/1200x800/filters:focal%2528807x387:1113x693%2529/cdn.vox-cdn.com/uploads/chorus_image/image/64058396/Madarame_Palace_Screenshot_2017_04_09_18_09_33.0.0.1492618961.0.png)

Esse é um dos meu jogos favoritos, pois eu gosto muito de jogos com mecânicas complexas, liberdade de gameplay e etc. Então ao invés de lutar com um grupo pré determinado pela trama como em Final Fantasy eu posso convidar os inimigos do jogo por meio de conversas que rolam no meio da batalha.  
E ter uma história sobre um programador que cria um script que invoca demônios de outros mundos é bem maluca e eu gosto de coisas malucas.

E ainda por cima tem esse mascote fofinho que é o Jack Frost que também é mascote da desenvolvedora do jogo a ATLUS, bastante conhecida pelos jogos da série Dark Souls.

[![**Jack Frost dont give a He-Ho!**](https://res.cloudinary.com/practicaldev/image/fetch/s--2g7Keod2--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://66.media.tumblr.com/d005efe069518773135b91e3b6094045/tumblr_przmh0AIy01w24boq_540.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--2g7Keod2--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://66.media.tumblr.com/d005efe069518773135b91e3b6094045/tumblr_przmh0AIy01w24boq_540.png)

Mas o que isso tem a ver com POO e abstração?  
A Idéia é utilizar a POO, para abstrair um código que represente um dos demônios do jogo.

Quem eu irei representar aqui é esse carinha:

[![Alt Text](https://res.cloudinary.com/practicaldev/image/fetch/s---W2BRxKD--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/okv4migm6c561jy19uno.jpeg)](https://res.cloudinary.com/practicaldev/image/fetch/s---W2BRxKD--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/okv4migm6c561jy19uno.jpeg)

Apesar do jogo ser sobre Demônios, a história envolve diversas entidades de várias culturas como Shiva, Thor, Samael e Baphomet.

> Esse na Imagem é Mastema, ele é um anjo usado por Deus, para testar a fé dos humanos conhecido também como Anjo do Desastre. Diz-se que Mastema é o anjo que desencadeou as dez pragas do Egito e tentou matar Moisés.

A abstração requer que de certo objeto possamos descrever uma entidade, características e ações. Como você já deve ter visto por aí o exemplo do Cachorro.

Cachorro é a **Entidade** ele pode ter várias **características**, como cor, tamanho, peso, altura, raça e um nome. Pode também ter **ações**, como comer, latir, marcar território.

Cachorro pode ter mais característica que essas? Pode fazer mais coisa?  
  
Claro que pode, só que a abstração que você deve fazer do seu objeto precisa ter as características e ações que você precisa naquele momento, tentar usar toda a abstração possível não vai te ajudar. Selecione aquilo que você acha essencial, se no final sentir que precisa de algo a mais, ai sim você bota a mão na massa de novo.

**Não precisa ser perfeito. Precisa estar feito!**

Na Imagem do Mastema que temos do jogo, temos várias coisinhas ali que são típicas de jogos de RPG. O próprio jogo em si já é uma abstração de algo, o que deixa as coisas ainda mais fáceis.

Então o Mastema tem um nome (**_Name_**), aquele Herald é a raça (**_Breed)_** dele. Temos uma bolinha roxa ali em cima também que representa o (**_Archetype)_** do Demon, isso serve para definir as Skill iniciais dele, existem Purple, Teal, Yellow, Red e Clear.  
  
Cada Mastema com um Archetype diferente vem com um padrão de Skills diferente o que muda totalmente a sua atuação em um time.

Onde Vemos 83 é o (**_Grade)_**, que é um nível entre os Personagens do jogo, Demons com um Grade alto tem um maior número de estrelas que são os desbloqueadores de niveis.

Ali a esquerda podemos ver o (**_Level)_** atual que é 50 e mais centralizado temos os (**_Stats)_** de Força, Magia, Vitalidade, Agilidade e Sorte.

Bem abaixo, temos sete (**_Elements)_** que indicam se esse Demon tem alguma fraqueza contra algum elemento específico. Físico, Fogo, Gelo, Trovão, Vento, Luz e Trevas.

Pronto, já temos aqui várias das características mais importantes dele.  
  
Agora temos as Habilidades bem alí no meio. Porém se queremos imaginar o Demon como entidade não podemos atribuir essas mesmas Skills para todos os personagens, afinal cada um tem habilidades diferentes.  
  
Uma coisa que todos eles têm em comum no jogo é atacar fisicamente (**_Attack_**) e passar (**_Pass_**) de turno. Então essas sim serão as ações, pois esse código será um molde para vários objetos e não apenas um.

**Então temos uma entidade, características e ações.**

[![Alt Text](https://res.cloudinary.com/practicaldev/image/fetch/s--s3fRNa0S--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/m477rzrk85nb88rv0iut.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--s3fRNa0S--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/m477rzrk85nb88rv0iut.png)

Com essas informações bem esclarecidas podemos agora pensar em como seria um código que gera um Demon com essas características.

Os exemplos em código que farei serão em Ruby, porém são extremamente simples e podem ser feitos com qualquer linguagem orientada a objetos. Porém o que conta aqui é entender os conceitos da POO pois isso é o mais importante. Se você apenas levar em consideração o código sempre será refém de tutoriais e nunca conseguirá fazer algo por conta própria.

Então para iniciar esse código a gente sempre começa abrindo uma classe:

```
class Demon
end

```

Ela tem um início um final e um nome o Nome das classes em Ruby sempre são iniciados com letra maiúscula. Aqui eu dei o nome da classe como Demon, pois queremos que era crie diversos objetos e não apenas um, a questão toda aqui não é só representar o Mastema, mas sim a entidade que gera ele.

Sabemos também que todos os Demons tem 7 atributos diferentes

**_:name, :breed, :grade, :level, :archetype, :stats, :elements_**

Mais tarde, teremos que criar objetos através dessa entidade, e para fazer isso cada objeto terá que receber essas características de uma forma única, pois cada um deles tem um estado diferente. Pode ter menos ST, um Level menor e etc. E para isso iremos usar o nosso amigão: **_attr_accessor_**

Ele funciona como um facilitador para usar todos os atributos de uma classe sem precisar definir um método para cada atributo.

Sem isso **_attr_accessor :name_**

Você teria que fazer isso:

```
def name
    @name
end

def name=(value)
    @name = value
end

```

Agora imagina se você tivesse mais de 1 atributo, ou quem sabe 7? Usando o [**_attr_accessor_**](https://ruby-doc.org/core-2.6.4/Module.html#method-i-attr_accessor) nosso código ficará assim*__:__*

```
class Demon
    attr_accessor :name, :breed, :grade, :level, :archetype, :stats, :elements
end

```

Para que possamos instanciar uma classe usamos o método [**_Initialize_**](https://ruby-doc.org/docs/ruby-doc-bundle/UsersGuide/rg/objinitialization.html) que é um método construtor. (Instânciar é quando realmente criamos um objeto a partir da nossa entidade)

```
class Demon
    arttr_accessor :name, :breed, :grade, :level, :archetype, :stats, :elements

    def initialize(name, breed, grade, level, archetype, stats, elements)
        @name = name
        @breed = breed
        @grade = grade
        @level = level
        @archetype = archetype
        @stats = {}
        @elements = {}
    end
end

```

Certo o código já está com um tamanho maior, mas não se assuste.

Tudo que fizemos aqui foi atribuir os atributos que a gente definiu lá em cima realmente é muito simples.

Todos os atributos que definimos na nossa fase de abstração estão definidos com “**_@_**” seguido de seu nome. Isso são [**_variáveis de instância_**](https://ruby-doc.org/core-2.6.4/Object.html#method-i-instance_variables), elas funcionam para armazenar valores, porém elas não podem ser usadas fora da sua classe.

Depois de Def Initialize temos todos os dados como argumentos para a criação do nosso objeto. Se você é atento já viu que no attr_accessor temos 7 atributos E no initialize temos 5 argumentos, a conta não bate.  
  
Acontece que os Stats e Elements iremos definir seus valores fora da classe. Por isso definimos eles em attr-accessor e não em initialize.

Toda a parte de Entidade e atributos está praticamente pronta, agora temos as ações. As ações em POO serão métodos que esses objetos poderão realizar. Como definimos que cada Demon por padrão pode atacar fisicamente e passar de turno, serão somente dois métodos.

```
class  Demon

    attr_accessor  :name, :breed, :grade, :level, :archetype, :stats, :elements

    def  initialize
        @name  = name
        @breed  = breed
        @grade  = grade
        @level  = level
        @archetype  = archetype
        @stats  = {}
        @elements  = []
    end

    def  attack
        'Physical Attack'
    end

    def  pass_turn
        'Give action for the next demon'
    end
end

```

O escopo de como se escreve um método é como em uma classe, porém ao invés de class usamos a palavra reservada def, e o nome dos nosso métodos seguem um padrão de escrita conhecido como snake case, letras minúsculas e caso seja um nome composto usamos o underscore para uni-las.  
  
No miolo do método temos a própria ação.  
  
Nos dois casos eu defini apenas uma string que diz o que a ação faz, pois a ideia aqui não é escrever o jogo, não estamos usando nenhuma biblioteca para isso. Definir um metodo que envolve as mecânicas de um jogo realmente implicaria em fazer cálculos com base no HP, Na Skill usada, Stats e etc.

Eventualmente você poderia escrever algo assim para um jogo, ou para um database, mas se você não vê utilidade no seu código neste momento, não fique desesperado. Nem todo código que você escrever vai ser útil ainda mais caso você esteja iniciando em programação, e não tem nenhum problema nisso se você estiver se divertindo enquanto aprende já é suficiente.

Voltando ao assunto, todas as variáveis de instância dentro do método initialize recebem o mesmo valor usado como argumento, exceto duas delas. **_@stats_** e **_@elements_** que recebem duas [**_Hashes_**](https://ruby-doc.org/core-2.6.4/Hash.html) vazias.

Hash é um método ruby para estruturas de dados indexadas onde temos um valor e uma chave para esse valor, o que faz todo sentido serem atribuídos para **_stats_** e **_elements_**, pois um valor de stats como **_ST_** sempre vem acompanhado de um valor como o do **_Mastema_** que tem **_97_**.

Cria-se uma relação entre chave e valor  
  
**_:St=>97_**

Assim como no caso dos **_elements_** que tem a relação de **_:Wind=>’Repel’_**

Antes de enfiar esses valores no hashe vamos definir esses valores como constantes. Constantes são definidas com a inicial em maiuscula e o restante em minuscula.

```
# constantes de stats
St = 'Strength'
Ma = 'Magic'
Vi = 'Vitality'
Ag = 'Agility'
Lu = 'Lucky'

#constantes de elementos
Physical = 'Physical'
Fire = 'Fire'
Ice = 'Ice'
Thunder = 'Thunder'
Wind = 'Wind'
Light = 'Light'
Dark = 'Dark'

```

Apesar de que no Ruby não se tem constantes de verdade, ele apenas gera um Warning caso algum programa mude um valor dessa variável.  
  
Agora depois definir tudo isso, você pode instanciar seu objeto e criar um Mastema assim.

```
mastema  =  Demon.new('Mastema', 'Herald', '83', '50', 'Purple')

```

Temos uma variável que vai receber o objeto como valor.  
  
Seguido do nome da classe e do método [**_New_**](https://ruby-doc.org/core-2.6.4/BasicObject.html#method-c-new), logo após definirmos os valores dos argumentos solicitados lá no initialize. Aqui eu usei o Mastema, mas poderia ser Shiva, Lúcifer ou qualquer outro **_Demon_** com as mesmas características.

Agora se você quiser instanciar seu objeto com os atributos você pode fazer o seguinte.

```
mastema.stats  = {
    ST: 97,
    MA: 221,
    VI: 165,
    AG: 133,
    LU: 182
}

mastema.elements  = {
    PHYSICAL: nill,
    FIRE: 'Weak',
    ICE: 'Null',
    THUNDER: nill,
    WIND: 'Rp',
    LIGHT: 'Rp',
    DARK: nill
}

```

Declaramos a variável do objeto mastema e usamos como método S*__tats__* ou E*__lements___, seguidos das chaves e valores dentro do hash. No caso nosso *__Mastema_** tem um S*__tats__* bem alto por estar no **_Level_** 50, mas você poderia definir aqui os valores de **_Base Stats_**, que são aqueles que o personagem tem, quando ele está no **_level 1_** por exemplo.

Para verificar cada detalhe, você pode usar um **_puts_** e depois executar em terminal. Se eu quero verificar os E*__lements__* por exemplo, posso usar:

```
puts mastema.elements

```

[![Alt Text](https://res.cloudinary.com/practicaldev/image/fetch/s--KZAQWu3M--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/gglf6lus5yzca3z9uab3.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--KZAQWu3M--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/gglf6lus5yzca3z9uab3.png)

```
puts mastema.name  
puts mastema.breed  
puts mastema.grade  
puts mastema.level  
puts mastema.archetype

```

[![Alt Text](https://res.cloudinary.com/practicaldev/image/fetch/s--UKbk13dk--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/ieie4vvkn2slju7djvn7.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--UKbk13dk--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/ieie4vvkn2slju7djvn7.png)

```
puts mastema.stats

```

[![Alt Text](https://res.cloudinary.com/practicaldev/image/fetch/s--HSxtgRG8--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/fiu4t2i224dabyor1yww.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--HSxtgRG8--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/fiu4t2i224dabyor1yww.png)

Acredito que isso não é nem 1% do que se pode aprender em POO mas com 1% já é possível fazer muita coisa.  
Agora eu deixo o desafio para você, faça a abstração de algo que você goste, pode ser um jogo, personagem, regra de negócio você que decide, mas o importante é que você crie algo seu. Busque as coisas que você gosta e conhece e tente usá-las no seu estudo, assim o processo de aprendizado fica muito mais agradável.
